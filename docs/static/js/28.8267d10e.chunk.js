"use strict";(self.webpackChunkfinance_app=self.webpackChunkfinance_app||[]).push([[28],{5028:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var c=t(5043),n=t(3910),a=t(7929),i=t(3003),o=t(3051),l=t(579);const r=e=>{let{stock:s,position:t,onMouseEnter:r,onMouseLeave:d}=e;const p=(0,i.wA)(),u=(0,c.useRef)(null);if((0,c.useEffect)((()=>{const e=u.current;e&&t&&(e.style.top=`${t.top+t.height+10}px`,e.style.left=`${t.left}px`)}),[t]),!s)return null;const h=s.todaysChangePerc.toFixed(2),m=h>=0?"positive":"negative",x=h>=0?a.INu:a.B0C;return(0,l.jsxs)("div",{ref:u,className:"stock-hover-popup",onMouseEnter:r,onMouseLeave:d,children:[(0,l.jsxs)("div",{className:"popup-header",children:[(0,l.jsxs)("div",{className:"popup-ticker",children:[(0,l.jsx)("span",{className:"stock-symbol",children:s.ticker}),(0,l.jsx)("span",{className:"stock-name",children:s.name})]}),(0,l.jsx)("button",{className:"watch-button",onClick:()=>{p((0,o.w7)(s.ticker)),console.log(`Added ${s.ticker} to watchlist`)},children:"Watch"})]}),(0,l.jsxs)("div",{className:"popup-price",children:[(0,l.jsxs)("span",{className:"stock-price",children:["$",s.price]}),(0,l.jsxs)("span",{className:`price-change ${m}`,children:[(0,l.jsx)(n.g,{icon:x})," ",s.priceChange," (",h,"%)"]})]}),(0,l.jsx)("div",{className:"popup-chart",children:(0,l.jsx)("div",{className:"line-chart"})}),(0,l.jsx)("div",{className:"popup-description",children:s.description||"No description available."})]})},d=()=>{(0,i.wA)();const[e,s]=(0,c.useState)({}),[t,o]=(0,c.useState)([]),[d,p]=(0,c.useState)(null),[u,h]=(0,c.useState)({top:0,left:0,height:0}),[m,x]=(0,c.useState)(!0),[N,j]=(0,c.useState)(!1);let k=null;const g=(0,c.useRef)(null),f=["AAPL","AMZN","GOOG","SHOP","AFRM","GME","ADBE","TSLA","MSFT","NVDA","AMD","PYPL","NFLX","SNAP","SPOT","PINS","TSM","UBER","LYFT","SQ","ROKU","CRWD","DOCU","META","PLTR","AVGO","OKTA","RIVN","PDD","DDOG","AMC","BA","BABA","BAC","C","DIS","F","GE","GME","GS","HD","IBM","INTC","JNJ","JPM","KO","MCD","SMCI","HOOD","OXY","NKE","PFE","PG","MRVL","UNH","V","VZ","WBA","ARM","XOM"],v=["SPY","QQQ","IWM","DIA"],M="oRw9ebHARHpYDonYIt4VNoYoOPhplFBV";(0,c.useEffect)((()=>{const e=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const c=await fetch(`https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${e}?apiKey=${M}`),n=await c.json();if(!t)return n.ticker;s((s=>({...s,[e]:n.ticker})))}catch(c){return console.error(`Error fetching data for ${e}:`,c),null}};v.forEach((s=>e(s,!0))),(async()=>{const s=f.map((s=>e(s))),t=await Promise.all(s);o(t.filter((e=>null!==e)))})()}),[M]);const A=()=>{k&&clearTimeout(k),k=setTimeout((()=>{p(null),j(!1)}),200)};return(0,l.jsxs)("div",{className:"trending-toolbar "+(N?"paused":""),ref:g,children:[(0,l.jsx)("div",{className:"form-check form-switch",children:(0,l.jsx)("input",{className:"form-check-input",type:"checkbox",id:"toggleSwitch",checked:m,onChange:()=>x(!m)})}),(0,l.jsxs)("div",{className:"index-data",children:[v.map((s=>(s=>{const t=e[s];if(!t)return null;const c=t.todaysChangePerc.toFixed(2),i=c>=0?"positive":"negative",o=c>=0?a.INu:a.B0C;return(0,l.jsxs)("div",{className:`index-item ${i}`,children:[(0,l.jsx)("span",{className:"stock-symbol",children:t.ticker}),m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.g,{icon:o}),(0,l.jsxs)("span",{className:"stock-percent",children:[c,"%"]})]}):(0,l.jsxs)("span",{className:"stock-price",children:["$",t.day.c.toFixed(2)]})]},s)})(s))),(0,l.jsxs)("span",{className:"trending-label text-secondary",children:["Trending ",(0,l.jsx)(n.g,{icon:a.mEO})]})]}),(0,l.jsx)("div",{className:"trending-stocks",children:(0,l.jsx)("div",{className:"scroll-container",children:[...t,...t].map(((e,s)=>{if(!e)return null;const t=e.todaysChangePerc.toFixed(2),c=t>=0?"positive":"negative",i=t>=0?a.INu:a.B0C;return(0,l.jsxs)("div",{className:`stock-item ${c}`,onMouseEnter:s=>((e,s)=>{k&&clearTimeout(k);const t=s.currentTarget.getBoundingClientRect();p(e),h({top:t.top+window.scrollY,left:t.left+window.scrollX,height:t.height}),j(!0)})(e,s),onMouseLeave:A,children:[(0,l.jsx)("span",{className:"stock-symbol",children:e.ticker}),m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.g,{icon:i}),(0,l.jsxs)("span",{className:"stock-percent",children:[t,"%"]})]}):(0,l.jsxs)("span",{className:"stock-price",children:["$",e.day.c.toFixed(2)]})]},`${e.ticker}-${s}`)}))})}),d&&(0,l.jsx)(r,{stock:d,position:u,onMouseEnter:()=>{k&&clearTimeout(k),j(!0)},onMouseLeave:()=>{k=setTimeout((()=>{p(null),j(!1)}),200)}})]})}}}]);
//# sourceMappingURL=28.8267d10e.chunk.js.map