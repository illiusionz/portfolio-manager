"use strict";(self.webpackChunkfinance_app=self.webpackChunkfinance_app||[]).push([[762],{7762:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var o=t(5043),n=t(3910),c=t(7929),l=t(3003),i=t(3051),a=t(108),r=t(1653),d=t(2185),u=t(6026),h=t(6150),p=t(168),v=t(247),m=t(579);const x=e=>{let{symbol:s}=e;const t=(0,l.wA)(),n=(0,l.d4)((e=>e.stocks.historicalData[s]));return(0,o.useEffect)((()=>{s&&!n&&t((0,v.L8)(s))}),[t,s,n]),n&&0!==n.length?(0,m.jsx)(a.u,{width:"100%",height:100,children:(0,m.jsxs)(r.b,{data:n,children:[(0,m.jsx)(d.W,{dataKey:"timestamp"})," ",(0,m.jsx)(u.h,{domain:["auto","auto"]})," ",(0,m.jsx)(h.m,{})," ",(0,m.jsx)(p.N,{type:"monotone",dataKey:"close",stroke:"#82ca9d",dot:!1})]})}):(0,m.jsx)("div",{children:"Loading chart data..."})},k=o.memo((e=>{let{stock:s,position:t,onMouseEnter:a,onMouseLeave:r}=e;const d=(0,l.wA)(),u=(0,o.useRef)(null);if((0,o.useEffect)((()=>{const e=u.current;e&&t&&(e.style.top=`${t.top+t.height+10}px`,e.style.left=`${t.left}px`)}),[t]),(0,o.useEffect)((()=>{console.log(`Hovered on stock: ${s.ticker}`,s)}),[s]),!s)return null;const h=s.todaysChangePerc.toFixed(2),p=h>=0?"positive":"negative",v=h>=0?c.INu:c.B0C;return(0,m.jsxs)("div",{ref:u,className:"stock-hover-popup",onMouseEnter:a,onMouseLeave:r,children:[(0,m.jsxs)("div",{className:"popup-header",children:[(0,m.jsxs)("div",{className:"popup-ticker",children:[(0,m.jsx)("span",{className:"stock-symbol",children:s.ticker}),(0,m.jsx)("span",{className:"stock-name",children:(e=>{if(!e)return"";const s=Math.min(e.indexOf(".")>-1?e.indexOf("."):e.length,e.indexOf(",")>-1?e.indexOf(","):e.length);return e.substring(0,s)})(s.name)})]}),(0,m.jsx)("button",{className:"watch-button",onClick:()=>{d((0,i.w7)(s.ticker)),console.log(`Added ${s.ticker} to watchlist`)},children:"Watch"})]}),(0,m.jsxs)("div",{className:"popup-price",children:[(0,m.jsxs)("span",{className:"stock-price",children:["$",s.prevDay.c]}),(0,m.jsxs)("span",{className:`price-change ${p}`,children:[(0,m.jsx)(n.g,{icon:v})," ",s.priceChange," (",h,"%)"]})]}),(0,m.jsx)("div",{className:"popup-chart",children:s.ticker?(0,m.jsx)(x,{symbol:s.ticker}):(0,m.jsx)("div",{children:"No chart data available"})}),(0,m.jsx)("p",{className:"popup-description",children:(k=s.description,g=300,(k?k.length<=g?k:k.slice(0,g)+"...":"")||"No description available.")})]});var k,g}));var g=t(9874),j=t(9751);const f=()=>{const e=(0,l.wA)(),[s,t]=(0,o.useState)(null),[i,a]=(0,o.useState)({top:0,left:0,height:0}),[r,d]=(0,o.useState)(!0),[u,h]=(0,o.useState)(!1);let p=null;const x=(0,o.useRef)(null),f=(0,l.d4)(g.SI),N=(0,l.d4)(g.be),y=(0,l.d4)(g.Vz),b=(0,l.d4)((e=>(0,g.tw)(e,null===s||void 0===s?void 0:s.ticker))),w=(0,l.d4)((e=>e.user)),M=(0,l.d4)((e=>e.stocks));(0,o.useEffect)((()=>{console.log("User State:",w),console.log("Stocks State:",M)}),[]);const S=[...N,...f];(0,o.useEffect)((()=>{e((0,v.aT)(S))}),[]);const $=()=>{console.log("Mouse leave triggered"),p&&clearTimeout(p),p=setTimeout((()=>{s&&(console.log("Dispatching setUserHoveredSymbol with: null"),t(null),e((0,j.NB)(null)),h(!1))}),400)},C=(s,o)=>{var l,i,d;const u=y[s];if(!u)return null;const x=null===u||void 0===u||null===(l=u.todaysChangePerc)||void 0===l?void 0:l.toFixed(2),k=x>=0?"positive":"negative",g=x>=0?c.INu:c.B0C;return(0,m.jsxs)("div",{className:`stock-item ${k}`,onMouseEnter:s=>((s,o)=>{console.log("Hovered Stock:",s),p&&clearTimeout(p);const n=o.currentTarget.getBoundingClientRect();t(s),console.log("Dispatching setUserHoveredSymbol with:",s.ticker),e((0,j.NB)(s.ticker)),a({top:n.top+window.scrollY,left:n.left+window.scrollX,height:n.height}),h(!0),e((0,v.Rh)(s.ticker))})(u,s),onMouseLeave:$,children:[(0,m.jsx)("span",{className:"stock-symbol",children:u.ticker}),r?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.g,{icon:g}),(0,m.jsxs)("span",{className:"stock-percent",children:[x,"%"]})]}):(0,m.jsxs)("span",{className:"stock-price",children:["$",null===u||void 0===u||null===(i=u.day)||void 0===i||null===(d=i.c)||void 0===d?void 0:d.toFixed(2)]})]},`${s}-${o}`)};return(0,m.jsxs)("div",{className:"trending-toolbar "+(u?"paused":""),ref:x,children:[(0,m.jsx)("div",{className:"form-check form-switch",children:(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"toggleSwitch",checked:r,onChange:()=>d(!r)})}),(0,m.jsxs)("div",{className:"index-data",children:[N.map((e=>((e,s)=>{var t,o,l;const i=y[e];if(!i)return null;const a=null===i||void 0===i||null===(t=i.day)||void 0===t||null===(o=t.c)||void 0===o?void 0:o.toFixed(2),d=null===i||void 0===i||null===(l=i.todaysChangePerc)||void 0===l?void 0:l.toFixed(2),u=d>=0?"positive":"negative",h=d>=0?c.INu:c.B0C;return(0,m.jsxs)("div",{className:`stock-item ${u}`,children:[(0,m.jsx)("span",{className:"stock-symbol",children:i.ticker}),r?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.g,{icon:h}),(0,m.jsxs)("span",{className:"stock-percent",children:[d,"%"]})]}):(0,m.jsxs)("span",{className:"stock-price",children:["$",a]})]},`${e}-${s}`)})(e))),(0,m.jsxs)("span",{className:"trending-label text-secondary",children:["Trending ",(0,m.jsx)(n.g,{icon:c.mEO})]})]}),(0,m.jsx)("div",{className:"trending-stocks",children:(0,m.jsx)("div",{className:"scroll-container",children:f.map((e=>C(e)))})}),s&&(0,m.jsx)(k,{stock:{...s,...b},position:i,onMouseEnter:()=>{p&&clearTimeout(p),h(!0)},onMouseLeave:()=>{p=setTimeout((()=>{s&&(t(null),e((0,j.NB)(null)),h(!1))}),200)}})]})}},9874:(e,s,t)=>{t.d(s,{SI:()=>l,V6:()=>u,Vz:()=>c,be:()=>i,tw:()=>a,yf:()=>d});var o=t(2099);const n=e=>e.stocks,c=(0,o.Mz)([n],(e=>e.stockTickerData||{})),l=(0,o.Mz)([n],(e=>e.trendingToolbarSymbols||[])),i=(0,o.Mz)([n],(e=>e.indexToolbarSymbols||[])),a=(0,o.Mz)([n,(e,s)=>s],((e,s)=>e.stockDetails[s]||{})),r=(0,o.Mz)([n,(e,s)=>s],((e,s)=>e.stockTickerData[s]||{})),d=(0,o.Mz)([r],(e=>{var s,t;return null!==(s=null===e||void 0===e||null===(t=e.prevDay)||void 0===t?void 0:t.c)&&void 0!==s?s:0})),u=((0,o.Mz)([r],(e=>{var s,t;return null!==(s=null===e||void 0===e||null===(t=e.prevDay)||void 0===t?void 0:t.c)&&void 0!==s?s:null})),(0,o.Mz)([r,(e,s)=>s],((e,s)=>e?e[s]:null)),(0,o.Mz)([n],(e=>e.error)))}}]);
//# sourceMappingURL=762.463066c5.chunk.js.map